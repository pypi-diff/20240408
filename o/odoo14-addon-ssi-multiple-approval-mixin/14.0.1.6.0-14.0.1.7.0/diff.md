# Comparing `tmp/odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 64069 bytes, number of entries: 19
--rw-r--r--  2.0 unx     1302 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/README.rst
--rw-r--r--  2.0 unx      181 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/__init__.py
--rw-r--r--  2.0 unx      823 b- defN 23-Dec-30 14:53 odoo/addons/ssi_multiple_approval_mixin/__manifest__.py
--rw-r--r--  2.0 unx      342 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/menu.xml
--rw-r--r--  2.0 unx      274 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py
--rw-r--r--  2.0 unx     4245 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py
--rw-r--r--  2.0 unx     2322 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py
--rw-r--r--  2.0 unx     1599 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py
--rw-r--r--  2.0 unx    19828 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py
--rw-r--r--  2.0 unx      641 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv
--rw-r--r--  2.0 unx    48333 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png
--rw-r--r--  2.0 unx      490 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml
--rw-r--r--  2.0 unx     1095 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml
--rw-r--r--  2.0 unx     3713 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
--rw-r--r--  2.0 unx     5603 b- defN 23-Dec-30 14:51 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
--rw-r--r--  2.0 unx     1845 b- defN 23-Dec-30 14:57 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Dec-30 14:57 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Dec-30 14:57 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2291 b- defN 23-Dec-30 14:57 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/RECORD
-19 files, 95024 bytes uncompressed, 60061 bytes compressed:  36.8%
+Zip file size: 64275 bytes, number of entries: 19
+-rw-r--r--  2.0 unx     1302 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/README.rst
+-rw-r--r--  2.0 unx      181 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/__init__.py
+-rw-r--r--  2.0 unx      823 b- defN 24-Apr-08 04:44 odoo/addons/ssi_multiple_approval_mixin/__manifest__.py
+-rw-r--r--  2.0 unx      342 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/menu.xml
+-rw-r--r--  2.0 unx      274 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py
+-rw-r--r--  2.0 unx     4245 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py
+-rw-r--r--  2.0 unx     2322 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py
+-rw-r--r--  2.0 unx     1599 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py
+-rw-r--r--  2.0 unx    20977 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py
+-rw-r--r--  2.0 unx      641 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv
+-rw-r--r--  2.0 unx    48333 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png
+-rw-r--r--  2.0 unx      490 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml
+-rw-r--r--  2.0 unx     1095 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml
+-rw-r--r--  2.0 unx     3713 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
+-rw-r--r--  2.0 unx     5603 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
+-rw-r--r--  2.0 unx     1843 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2291 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD
+19 files, 96171 bytes uncompressed, 60267 bytes compressed:  37.3%
```

## zipnote {}

```diff
@@ -39,20 +39,20 @@
 
 Filename: odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
 Comment: 
 
 Filename: odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/METADATA
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/WHEEL
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/top_level.txt
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/RECORD
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/ssi_multiple_approval_mixin/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2022 OpenSynergy Indonesia
 # Copyright 2022 PT. Simetri Sinergi Indonesia
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 # pylint: disable=locally-disabled, manifest-required-author
 {
     "name": "Multiple Approval",
-    "version": "14.0.1.6.0",
+    "version": "14.0.1.7.0",
     "category": "Administration",
     "website": "https://simetri-sinergi.id",
     "author": "OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia",
     "license": "AGPL-3",
     "installable": True,
     "depends": [
         "base",
```

## odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py

```diff
@@ -355,22 +355,40 @@
             if self.is_decorator(func, "_post_approve_action"):
                 methods.append(func)
         if methods:
             self.run_decorator_method(methods)
 
     def action_approve_approval(self):
         for rec in self.sudo():
+            rec._check_approve_policy()
             rec._run_pre_approve_check()
             rec._run_pre_approve_action()
             rec._action_approval("approved")
             if rec._check_all_approve() and self._after_approved_method:
                 getattr(rec, self._after_approved_method)()
             rec._run_post_approve_check()
             rec._run_post_approve_action()
 
+    def _check_approve_policy(self):
+        self.ensure_one()
+        if self.env.context.get("bypass_approve_policy", False):
+            return True
+
+        if not self.approve_ok:
+            error_message = """
+            Context: Approve %s
+            Database ID: %s
+            Problem: Document is not allowed to approve
+            Solution: Check approve policy prerequisite
+            """ % (
+                self._description.lower(),
+                self.id,
+            )
+            raise UserError(_(error_message))
+
     def _run_pre_reject_check(self):
         self.ensure_one()
         cls = type(self)
         methods = []
         for _attr, func in getmembers(cls):
             if self.is_decorator(func, "_pre_reject_check"):
                 methods.append(func)
@@ -405,20 +423,38 @@
             if self.is_decorator(func, "_post_reject_action"):
                 methods.append(func)
         if methods:
             self.run_decorator_method(methods)
 
     def action_reject_approval(self):
         for rec in self.sudo():
+            rec._check_reject_policy()
             rec._run_pre_reject_check()
             rec._run_pre_reject_action()
             rec._action_approval("rejected")
             rec._run_post_reject_check()
             rec._run_post_reject_action()
 
+    def _check_reject_policy(self):
+        self.ensure_one()
+        if self.env.context.get("bypass_reject_policy", False):
+            return True
+
+        if not self.reject_ok:
+            error_message = """
+            Context: Reject %s
+            Database ID: %s
+            Problem: Document is not allowed to reject
+            Solution: Check reject policy prerequisite
+            """ % (
+                self._description.lower(),
+                self.id,
+            )
+            raise UserError(_(error_message))
+
     def action_reload_approval_template(self):
         for rec in self.sudo():
             rec.mapped("approval_ids").unlink()
             rec.mapped("active_approver_partner_ids").unlink()
             rec.action_request_approval()
 
     def action_reload_approval(self):
```

## Comparing `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/METADATA` & `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA`

 * *Files 9% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-ssi-multiple-approval-mixin
-Version: 14.0.1.6.0
+Version: 14.0.1.7.0
 Summary: Multiple Approval
 Home-page: https://simetri-sinergi.id
 Author: OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.6
 Requires-Dist: odoo14-addon-ssi-decorator
-Requires-Dist: odoo (<14.1dev,>=14.0a)
+Requires-Dist: odoo <14.1dev,>=14.0a
 
 .. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: AGPL-3
 
 =======================
 Multiple Approval Mixin
```

## Comparing `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/RECORD` & `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 odoo/addons/ssi_multiple_approval_mixin/README.rst,sha256=LJU6dKTSwu2N369kY123CsDkY390lzcrv5xrTJdxZvQ,1302
 odoo/addons/ssi_multiple_approval_mixin/__init__.py,sha256=VAkFvJXefoz7CVUwbL97HBfpLAYmvQPYXfYs71LOpzU,181
-odoo/addons/ssi_multiple_approval_mixin/__manifest__.py,sha256=8kVFUYN96Y3-FXdseS8xDavxU2H5jAInECGH_ifs3HI,823
+odoo/addons/ssi_multiple_approval_mixin/__manifest__.py,sha256=_KX0lpcd2Y8si84d1nmvB2unfVsNQ5E3h8UinxHvJsg,823
 odoo/addons/ssi_multiple_approval_mixin/menu.xml,sha256=D88r1tUnup57cw-RD8BwMC_pKGm4N4P8dq3s4c4zuAM,342
 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py,sha256=iycNXFypc74w67LOzd7uLp_w2kSgae7qd6sn4zsLWCM,274
 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py,sha256=CMye_66N9HCpSp8da5EaT_U6ImK5mIu-CMIfMoydeCo,4245
 odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py,sha256=XZsT2239rZ3pVlCKoQJLHHveoR62wAi0xiqKt_EpXHs,2322
 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py,sha256=22KGnfCcfwmQrqiInT66sXDY_52BKAexEzAD83YIKAo,1599
-odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py,sha256=AmZoMu42Om9kX-KmETFrK3T49_uCZTcIkz4BNRfGjus,19828
+odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py,sha256=wnVLjnn50A-uCQS8FDYOYLqvEMcNZ2u8RW22_ENeTXE,20977
 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv,sha256=WKZFgSNIe9MQvZ-2lcaVNJCmzWu4v5_RyFiAo-EuTJ0,641
 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png,sha256=lNGJOSg4cMRfwPTfFKVT6d5B2N1N83iVpEEN1blqu1I,48333
 odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml,sha256=BrYQZ7S2KDGuVLOVltLvbH0bblQyHuygoCoM0XPaNZ0,490
 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml,sha256=3ox2Qc_FamM6N88UkidSV76M9uKrLy_s3TIF5_oJbnY,1095
 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml,sha256=yRqVFGJ72qas_7P-24HicDkKUTZ9QwYWccUZitMTALE,3713
 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml,sha256=dRoaQbBRjxbX7wTsn02WTmznhwDgyb1eW6fI5VBNKOs,5603
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/METADATA,sha256=e3MiaNShXWAlHCuyVco88lQ5Fhezq8XhUXPuYv7X8us,1845
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.6.0.dist-info/RECORD,,
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA,sha256=YAZBpc3slRZfLu6IZTbxeAW9OWvVx0ZcaUUlEfAS680,1843
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD,,
```

