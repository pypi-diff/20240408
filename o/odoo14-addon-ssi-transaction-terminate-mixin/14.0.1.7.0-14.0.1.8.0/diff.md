# Comparing `tmp/odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 60715 bytes, number of entries: 20
--rw-r--r--  2.0 unx     1244 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/README.rst
--rw-r--r--  2.0 unx      194 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/__init__.py
--rw-r--r--  2.0 unx      791 b- defN 23-Dec-30 14:53 odoo/addons/ssi_transaction_terminate_mixin/__manifest__.py
--rw-r--r--  2.0 unx      860 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/demo/base_terminate_reason_demo.xml
--rw-r--r--  2.0 unx      243 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/models/__init__.py
--rw-r--r--  2.0 unx      691 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/models/base_terminate_reason.py
--rw-r--r--  2.0 unx     1112 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/models/ir_model.py
--rw-r--r--  2.0 unx     7418 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/models/mixin_transaction_terminate.py
--rw-r--r--  2.0 unx      402 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/security/ir.model.access.csv
--rw-r--r--  2.0 unx    48333 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/static/description/icon.png
--rw-r--r--  2.0 unx      859 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml
--rw-r--r--  2.0 unx     2357 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/views/base_terminate_reason_views.xml
--rw-r--r--  2.0 unx      690 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/views/ir_model_views.xml
--rw-r--r--  2.0 unx      203 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/wizards/__init__.py
--rw-r--r--  2.0 unx     1729 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason.py
--rw-r--r--  2.0 unx     1624 b- defN 23-Dec-30 14:51 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason_views.xml
--rw-r--r--  2.0 unx     1817 b- defN 23-Dec-30 14:56 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Dec-30 14:56 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Dec-30 14:56 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2519 b- defN 23-Dec-30 14:56 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/RECORD
-20 files, 73183 bytes uncompressed, 56281 bytes compressed:  23.1%
+Zip file size: 60978 bytes, number of entries: 20
+-rw-r--r--  2.0 unx     1244 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/README.rst
+-rw-r--r--  2.0 unx      194 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/__init__.py
+-rw-r--r--  2.0 unx      791 b- defN 24-Apr-08 04:44 odoo/addons/ssi_transaction_terminate_mixin/__manifest__.py
+-rw-r--r--  2.0 unx      860 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/demo/base_terminate_reason_demo.xml
+-rw-r--r--  2.0 unx      243 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/models/__init__.py
+-rw-r--r--  2.0 unx      691 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/models/base_terminate_reason.py
+-rw-r--r--  2.0 unx     1112 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/models/ir_model.py
+-rw-r--r--  2.0 unx     8511 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/models/mixin_transaction_terminate.py
+-rw-r--r--  2.0 unx      402 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/security/ir.model.access.csv
+-rw-r--r--  2.0 unx    48333 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/static/description/icon.png
+-rw-r--r--  2.0 unx     1081 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml
+-rw-r--r--  2.0 unx     2357 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/views/base_terminate_reason_views.xml
+-rw-r--r--  2.0 unx      690 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/views/ir_model_views.xml
+-rw-r--r--  2.0 unx      203 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/wizards/__init__.py
+-rw-r--r--  2.0 unx     1729 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason.py
+-rw-r--r--  2.0 unx     1624 b- defN 24-Apr-08 04:43 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason_views.xml
+-rw-r--r--  2.0 unx     1815 b- defN 24-Apr-08 04:45 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-08 04:45 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-08 04:45 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2520 b- defN 24-Apr-08 04:45 odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/RECORD
+20 files, 74497 bytes uncompressed, 56544 bytes compressed:  24.1%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason.py
 Comment: 
 
 Filename: odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason_views.xml
 Comment: 
 
-Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/METADATA
+Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/WHEEL
+Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/top_level.txt
+Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/RECORD
+Filename: odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/ssi_transaction_terminate_mixin/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2022 OpenSynergy Indonesia
 # Copyright 2022 PT. Simetri Sinergi Indonesia
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/lgpl).
 {
     "name": "Transaction Mixin - Terminate State",
-    "version": "14.0.1.7.0",
+    "version": "14.0.1.8.0",
     "website": "https://simetri-sinergi.id",
     "author": "OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia",
     "license": "AGPL-3",
     "installable": True,
     "depends": [
         "ssi_transaction_mixin",
     ],
```

## odoo/addons/ssi_transaction_terminate_mixin/models/mixin_transaction_terminate.py

```diff
@@ -2,15 +2,18 @@
 # Copyright 2022 PT. Simetri Sinergi Indonesia
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/lgpl).
 
 from inspect import getmembers
 
 from lxml import etree
 
-from odoo import api, fields, models
+from odoo import _, api, fields, models
+from odoo.exceptions import UserError
+
+from odoo.addons.ssi_decorator import ssi_decorator
 
 
 class MixinTransactionTerminate(models.AbstractModel):
     _name = "mixin.transaction_terminate"
     _inherit = [
         "mixin.transaction",
     ]
@@ -97,20 +100,38 @@
             if self.is_decorator(func, "_post_terminate_action"):
                 methods.append(func)
         if methods:
             self.run_decorator_method(methods)
 
     def action_terminate(self, terminate_reason=False):
         for record in self.sudo():
+            record._check_terminate_policy()
             record._run_pre_terminate_check()
             record._run_pre_terminate_action()
             record.write(record._prepare_terminate_data(terminate_reason))
             record._run_post_terminate_check()
             record._run_post_terminate_action()
 
+    def _check_terminate_policy(self):
+        self.ensure_one()
+        if self.env.context.get("bypass_terminate_policy", False):
+            return True
+
+        if not self.terminate_ok:
+            error_message = """
+            Context: Terminate %s
+            Database ID: %s
+            Problem: Document is not allowed to terminate
+            Solution: Check terminate policy prerequisite
+            """ % (
+                self._description.lower(),
+                self.id,
+            )
+            raise UserError(_(error_message))
+
     def _prepare_restart_data(self):
         self.ensure_one()
         _super = super(MixinTransactionTerminate, self)
         result = _super._prepare_restart_data()
         result.update(
             {
                 "terminate_reason_id": False,
@@ -203,7 +224,18 @@
             view_arch = self._add_view_element(
                 view_arch,
                 "ssi_transaction_terminate_mixin.terminate_reason",
                 "/form/sheet/div[@class='oe_left']/div[@class='oe_title']/h1",
                 "after",
             )
         return view_arch
+
+    @ssi_decorator.insert_on_tree_view()
+    def _01_view_add_tree_terminate_button(self, view_arch):
+        if self._automatically_insert_terminate_button:
+            view_arch = self._add_view_element(
+                view_arch,
+                "ssi_transaction_terminate_mixin.tree_button_terminate",
+                "/tree/header",
+                "inside",
+            )
+        return view_arch
```

## odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml

### odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml

```diff
@@ -2,14 +2,17 @@
 <odoo>
   <template id="terminate_policy_field">
     <field name="terminate_ok"/>
   </template>
   <template id="button_terminate">
     <button name="%(ssi_transaction_terminate_mixin.base_select_terminate_reason_action)d" string="Terminate" type="action" attrs="{'invisible':[('terminate_ok','!=',True)]}"/>
   </template>
+  <template id="tree_button_terminate">
+    <button name="%(ssi_transaction_terminate_mixin.base_select_terminate_reason_action)d" string="Terminate" type="action"/>
+  </template>
   <template id="terminate_reason">
     <h2 attrs="{'invisible': [('state', '!=', 'terminate')]}">
       <label for="terminate_reason_id" string="Termination reason:"/>
       <field name="terminate_reason_id" class="oe_inline"/>
     </h2>
   </template>
   <template id="terminate_filter">
```

## Comparing `odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/METADATA` & `odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-ssi-transaction-terminate-mixin
-Version: 14.0.1.7.0
+Version: 14.0.1.8.0
 Summary: Transaction Mixin - Terminate State
 Home-page: https://simetri-sinergi.id
 Author: OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.6
 Requires-Dist: odoo14-addon-ssi-transaction-mixin
-Requires-Dist: odoo (<14.1dev,>=14.0a)
+Requires-Dist: odoo <14.1dev,>=14.0a
 
 .. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: AGPL-3
 
 ===================================
 Transaction Mixin - Terminate State
```

## Comparing `odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/RECORD` & `odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/RECORD`

 * *Files 26% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 odoo/addons/ssi_transaction_terminate_mixin/README.rst,sha256=KRO4kyjjWVAetZy82RYRQj2dgRQKxOKbROOU9B2e4aQ,1244
 odoo/addons/ssi_transaction_terminate_mixin/__init__.py,sha256=wJoQUI3YmB8vss-Ui-9TK6LnDvTJE7JINkW-jl7BEJs,194
-odoo/addons/ssi_transaction_terminate_mixin/__manifest__.py,sha256=wFEct6PTMu7Qqn9QY3GIZRH91lvpkD8_pb6CnmD9yBg,791
+odoo/addons/ssi_transaction_terminate_mixin/__manifest__.py,sha256=aU4cCsbTTXA4OkNOTiorNY4iLRl8gm4RsVn9lXWPH3c,791
 odoo/addons/ssi_transaction_terminate_mixin/demo/base_terminate_reason_demo.xml,sha256=VJS_pBoKowsy6Tvtnywae80js_hKlHHnQU82TBdePvI,860
 odoo/addons/ssi_transaction_terminate_mixin/models/__init__.py,sha256=h0BCn2FJ_XuH5jFwPXKoV8gahRpZxOhiviWN2f3Q40M,243
 odoo/addons/ssi_transaction_terminate_mixin/models/base_terminate_reason.py,sha256=fzhRLI_QiXTwuFovuoANCjEPMozJyLjlMG6dCzviIbM,691
 odoo/addons/ssi_transaction_terminate_mixin/models/ir_model.py,sha256=QTnM2cTDuUJ5LfWVHDTwBQiLAV-b6SyS0wjdsjVPQWE,1112
-odoo/addons/ssi_transaction_terminate_mixin/models/mixin_transaction_terminate.py,sha256=cWqACJzLvg-8SVfhQuB7oPHj3PmNByrxq33jsJnWMZw,7418
+odoo/addons/ssi_transaction_terminate_mixin/models/mixin_transaction_terminate.py,sha256=UktPxSA2YB21YI7fi8rZZQDxfqhSLYAVAQ2s6hn1s-I,8511
 odoo/addons/ssi_transaction_terminate_mixin/security/ir.model.access.csv,sha256=vDDkELmn9br4R6N0-SL99zpasN9wUl3esVQdXEhRdqM,402
 odoo/addons/ssi_transaction_terminate_mixin/static/description/icon.png,sha256=lNGJOSg4cMRfwPTfFKVT6d5B2N1N83iVpEEN1blqu1I,48333
-odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml,sha256=CiVDjEJ03wwCJNj26Q41VNmS0mfG0ElkSkttYpplFGU,859
+odoo/addons/ssi_transaction_terminate_mixin/templates/mixin_transaction_terminate_templates.xml,sha256=oUIqRZLUnSSj1Th7KIYa-Ff3GGnT5thLt90iYqRj9ms,1081
 odoo/addons/ssi_transaction_terminate_mixin/views/base_terminate_reason_views.xml,sha256=DRmzCG_juxS0b5hQSwl2AxvHQr23yUyopcZaXdJ3IsE,2357
 odoo/addons/ssi_transaction_terminate_mixin/views/ir_model_views.xml,sha256=3bpwlCcC4jyvqbUqOzspW945gGeKxK9BmA_sK05TTZE,690
 odoo/addons/ssi_transaction_terminate_mixin/wizards/__init__.py,sha256=OnJjSKleyIfMQSJUl9nI6hf7WBOezLsS4DYyQSr6YrI,203
 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason.py,sha256=cPnp6--GcIj-cE3ie66TIcGpPfAcePvh-PMEYOvzxC4,1729
 odoo/addons/ssi_transaction_terminate_mixin/wizards/base_select_terminate_reason_views.xml,sha256=oM0NL-vIDWcNIudwN6z215qS8fBQQKHoV8tgyEySjis,1624
-odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/METADATA,sha256=gOF996kIOF7CCPpZ-9Gvhl7QVcp9koh_seSV3fDVESA,1817
-odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.7.0.dist-info/RECORD,,
+odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/METADATA,sha256=ovkvkZ2U_eNm1aWt51VrIv09dw9YNKxxRxjgCkAuu40,1815
+odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_ssi_transaction_terminate_mixin-14.0.1.8.0.dist-info/RECORD,,
```

