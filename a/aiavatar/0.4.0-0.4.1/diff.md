# Comparing `tmp/aiavatar-0.4.0-py3-none-any.whl.zip` & `tmp/aiavatar-0.4.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,25 @@
-Zip file size: 23592 bytes, number of entries: 22
+Zip file size: 24811 bytes, number of entries: 23
 -rw-r--r--  2.0 unx      438 b- defN 24-Feb-26 03:37 aiavatar/__init__.py
--rw-r--r--  2.0 unx     3407 b- defN 23-Jun-04 12:15 aiavatar/avatar.py
--rw-r--r--  2.0 unx     6092 b- defN 24-Feb-27 12:21 aiavatar/bot.py
--rw-r--r--  2.0 unx      284 b- defN 23-May-27 03:16 aiavatar/animation/__init__.py
+-rw-r--r--  2.0 unx     3407 b- defN 24-Apr-07 17:32 aiavatar/avatar.py
+-rw-r--r--  2.0 unx     6092 b- defN 24-Apr-08 00:28 aiavatar/bot.py
+-rw-r--r--  2.0 unx     1771 b- defN 24-Apr-07 09:53 aiavatar/animation/__init__.py
+-rw-r--r--  2.0 unx     1235 b- defN 24-Apr-07 12:43 aiavatar/animation/vrchat.py
 -rw-r--r--  2.0 unx       31 b- defN 23-May-27 03:48 aiavatar/device/__init__.py
 -rw-r--r--  2.0 unx     2344 b- defN 23-Jun-22 03:33 aiavatar/device/audio.py
 -rw-r--r--  2.0 unx     1650 b- defN 23-Jun-04 16:30 aiavatar/face/__init__.py
 -rw-r--r--  2.0 unx     1556 b- defN 23-Jun-04 16:30 aiavatar/face/vrchat.py
--rw-r--r--  2.0 unx     6342 b- defN 24-Feb-26 00:05 aiavatar/listeners/__init__.py
+-rw-r--r--  2.0 unx     6342 b- defN 24-Apr-07 07:28 aiavatar/listeners/__init__.py
 -rw-r--r--  2.0 unx     1892 b- defN 24-Feb-26 00:03 aiavatar/listeners/azurevoicerequest.py
 -rw-r--r--  2.0 unx     2085 b- defN 24-Feb-26 03:54 aiavatar/listeners/azurewakeword.py
 -rw-r--r--  2.0 unx      977 b- defN 24-Feb-26 00:10 aiavatar/listeners/voicerequest.py
 -rw-r--r--  2.0 unx     1078 b- defN 24-Feb-26 03:54 aiavatar/listeners/wakeword.py
 -rw-r--r--  2.0 unx      178 b- defN 23-May-27 08:55 aiavatar/processors/__init__.py
 -rw-r--r--  2.0 unx     5484 b- defN 24-Feb-24 06:51 aiavatar/processors/chatgpt.py
 -rw-r--r--  2.0 unx      275 b- defN 23-May-27 08:54 aiavatar/speech/__init__.py
--rw-r--r--  2.0 unx     2483 b- defN 24-Feb-24 07:19 aiavatar/speech/voicevox.py
--rw-r--r--  2.0 unx    11324 b- defN 24-Feb-27 12:45 aiavatar-0.4.0.dist-info/LICENSE
--rw-r--r--  2.0 unx    12513 b- defN 24-Feb-27 12:45 aiavatar-0.4.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Feb-27 12:45 aiavatar-0.4.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 24-Feb-27 12:45 aiavatar-0.4.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1819 b- defN 24-Feb-27 12:45 aiavatar-0.4.0.dist-info/RECORD
-22 files, 62353 bytes uncompressed, 20640 bytes compressed:  66.9%
+-rw-r--r--  2.0 unx     2483 b- defN 24-Apr-08 10:49 aiavatar/speech/voicevox.py
+-rw-r--r--  2.0 unx    11324 b- defN 24-Apr-08 10:50 aiavatar-0.4.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx    12628 b- defN 24-Apr-08 10:50 aiavatar-0.4.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-08 10:50 aiavatar-0.4.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 24-Apr-08 10:50 aiavatar-0.4.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1905 b- defN 24-Apr-08 10:50 aiavatar-0.4.1.dist-info/RECORD
+23 files, 65276 bytes uncompressed, 21727 bytes compressed:  66.7%
```

## zipnote {}

```diff
@@ -6,14 +6,17 @@
 
 Filename: aiavatar/bot.py
 Comment: 
 
 Filename: aiavatar/animation/__init__.py
 Comment: 
 
+Filename: aiavatar/animation/vrchat.py
+Comment: 
+
 Filename: aiavatar/device/__init__.py
 Comment: 
 
 Filename: aiavatar/device/audio.py
 Comment: 
 
 Filename: aiavatar/face/__init__.py
@@ -45,23 +48,23 @@
 
 Filename: aiavatar/speech/__init__.py
 Comment: 
 
 Filename: aiavatar/speech/voicevox.py
 Comment: 
 
-Filename: aiavatar-0.4.0.dist-info/LICENSE
+Filename: aiavatar-0.4.1.dist-info/LICENSE
 Comment: 
 
-Filename: aiavatar-0.4.0.dist-info/METADATA
+Filename: aiavatar-0.4.1.dist-info/METADATA
 Comment: 
 
-Filename: aiavatar-0.4.0.dist-info/WHEEL
+Filename: aiavatar-0.4.1.dist-info/WHEEL
 Comment: 
 
-Filename: aiavatar-0.4.0.dist-info/top_level.txt
+Filename: aiavatar-0.4.1.dist-info/top_level.txt
 Comment: 
 
-Filename: aiavatar-0.4.0.dist-info/RECORD
+Filename: aiavatar-0.4.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## aiavatar/animation/__init__.py

```diff
@@ -1,11 +1,55 @@
 from abc import ABC, abstractmethod
+from logging import getLogger, NullHandler
+from threading import Thread
+from time import time, sleep
 
 class AnimationController(ABC):
     @abstractmethod
     async def animate(self, name: str, duration: float):
         pass
 
 
-class AnimationControllerDummy(AnimationController):
+class AnimationControllerBase(AnimationController):
+    def __init__(self, animations: dict=None, idling_key: str="idling", verbose: bool=False):
+        self.logger = getLogger(__name__)
+        self.logger.addHandler(NullHandler())
+        self.verbose = verbose
+
+        self.animations = animations or {
+            idling_key: 0,
+            "angry_hands_on_waist": 1,
+            "concern_right_hand_front": 2,
+            "waving_arm": 3,
+            "nodding_once": 4
+        }
+        self.idling_key = idling_key
+
+        self.reset_at = None
+        self.reset_thread = Thread(target=self.reset_worker, daemon=True)
+        self.reset_thread.start()
+
+    def reset_worker(self):
+        while True:
+            if self.reset_at and time() >= self.reset_at:
+                if self.verbose:
+                    self.logger.info(f"Time to reset: {self.reset_at}")
+                self.reset()
+                self.reset_at = None
+
+            sleep(0.1)
+
+    def subscribe_reset(self, reset_at: float):
+        self.reset_at = reset_at
+        if self.verbose:
+            self.logger.info(f"Reset subscribed at {self.reset_at}")
+
     async def animate(self, name: str, duration: float):
-        pass
+        self.subscribe_reset(time() + duration)
+        self.logger.info(f"animation: {self.animations[name]} ({name})")
+
+    def reset(self):
+        self.logger.info(f"Reset animation: {self.animations[self.idling_key]} ({self.idling_key})")
+
+
+class AnimationControllerDummy(AnimationControllerBase):
+    pass
```

## Comparing `aiavatar-0.4.0.dist-info/LICENSE` & `aiavatar-0.4.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `aiavatar-0.4.0.dist-info/METADATA` & `aiavatar-0.4.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: aiavatar
-Version: 0.4.0
+Version: 0.4.1
 Summary: ü•∞ Building AI-based conversational avatars lightning fast ‚ö°Ô∏èüí¨
 Home-page: https://github.com/uezo/aiavatar
 Author: uezo
 Author-email: uezo@uezo.net
 Maintainer: uezo
 Maintainer-email: uezo@uezo.net
 License: Apache v2
@@ -111,15 +111,15 @@
 ```bash
 $ python run.py
 ```
 
 When you say the wake word "„Åì„Çì„Å´„Å°„ÅØ" the AIAvatar will respond with "„Å©„ÅÜ„Åó„Åü„ÅÆÔºü".
 Feel free to enjoy the conversation afterwards!
 
-If you want to set face expression on some action, configure as follows:
+If you want to set face expression and animation, configure as follows:
 
 ```python
 # Add face expresions
 app.avatar_controller.face_controller.faces["on_wake"] = 10
 app.avatar_controller.face_controller.faces["on_listening"] = 11
 app.avatar_controller.face_controller.faces["on_thinking"] = 12
 
@@ -129,14 +129,17 @@
 app.request_listener.on_start_listening = set_listening_face
 
 # Set face when the character is processing the request
 async def set_thinking_face():
     await app.avatar_controller.face_controller.set_face("on_thinking", 3.0)
 app.chat_processor.on_start_processing = set_thinking_face
 
+# Add animations (also add "walk" to the prompt)
+app.avatar_controller.animation_controller.animations["walk"] = 9
+
 async def on_wakeword(text):
     logger.info(f"Wakeword: {text}")
     # Set face when wakeword detected
     await app.avatar_controller.face_controller.set_face("on_wake", 2.0)
     await app.start_chat(request_on_start=text, skip_start_voice=True)
 ```
```

